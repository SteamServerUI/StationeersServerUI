<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{.UIText_ServerConfig}}</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="stylesheet" href="/static/css/components.css">
    <link rel="stylesheet" href="/static/css/tabs.css">
    <link rel="stylesheet" href="/static/css/background.css">
    <link rel="stylesheet" href="/static/css/mobile.css">
    <link rel="stylesheet" href="/static/css/config.css">
    <link rel="stylesheet" href="/static/css/detectionmanager.css">
    <link rel="stylesheet" href="/static/css/flags.css">
    <link rel="stylesheet" href="/static/css/popup.css">
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
</head>

<body>
    <div id="space-background"></div>
    <div id="universalPopup" class="popup">
        <div class="popup-content">
            <h2 id="popupTitle"></h2>
            <p id="popupMessage"></p>
            <button onclick="closePopup()">Close</button>
        </div>
    </div>
    <header>
        <img src="/static/stationeers.webp" alt="Stationeers Banner" id="banner">
        <div id="language-flags">
            <img src="/static/flags/en.webp" alt="English" data-lang="en-US" title="English">
            <img src="/static/flags/de.webp" alt="German" data-lang="de-DE" title="German">
            <img src="/static/flags/sv.webp" alt="Swedish" data-lang="sv-SE" title="Swedish">
        </div>
    </header>
    <main>
        <h1>{{.UIText_ConfigHeadline}}</h1>

        <div class="sliding-tabs-container">
            <div class="sliding-tabs">
                <button class="sliding-tab-button" onclick="window.location.href = '/'">
                    <span class="icon back-icon"></span>
                    <span class="tab-text">{{.UIText_BackToDashboard}}</span>
                </button>
                <button class="sliding-tab-button active" data-tab="server-config-tab">
                    <span class="icon server-icon"></span>
                    <span class="tab-text">{{.UIText_ServerConfig}}</span>
                </button>
                <button class="sliding-tab-button" data-tab="discord-config-tab">
                    <span class="icon discord-icon"></span>
                    <span class="tab-text">{{.UIText_DiscordIntegration}}</span>
                </button>
                <button class="sliding-tab-button" data-tab="slp-config-tab">
                    <span class="icon slp-icon"></span>
                    <span class="tab-text">{{.UIText_SLPModIntegration}}</span>
                </button>
                <button class="sliding-tab-button" data-tab="detectionmanager-config-tab">
                    <span class="icon detection-icon"></span>
                    <span class="tab-text">{{.UIText_DetectionManager}}</span>
                </button>
            </div>
        </div>

        <div id="server-config-tab" class="tab-content active">
            <div class="grid-container">
                <div class="wizard-button-container">
                    <button class="wizard-button" onclick="window.location.href = '/setup?step=game_branch'">
                        <span class="wizard-icon"></span>
                        <span class="wizard-text">{{.UIText_ConfigurationWizard}}</span>
                    </button>
                </div>
                <div class="config-sections">
                    <div class="section-navigation">
                        <button class="section-nav-button"
                            data-section="basic-settings">{{.UIText_BasicSettings}}</button>
                        {{if eq .IsNewTerrainAndSaveSystemTrueSelected "selected"}}
                        <button class="section-nav-button"
                            data-section="terrain-settings">{{.UIText_TerrainSettings}}</button>
                        {{end}}
                        <button class="section-nav-button"
                            data-section="network-settings">{{.UIText_NetworkSettings}}</button>
                        <button class="section-nav-button"
                            data-section="advanced-settings">{{.UIText_AdvancedSettings}}</button>
                    </div>

                    <form id="server-config-form" action="/saveconfigasjson" method="post">
                        <div id="select-prompt"
                            style="text-align: center; margin: 30px 0; color: var(--primary); font-family: 'Share Tech Mono', monospace;">
                            <h3>{{.UIText_PleaseSelectSection}}</h3>
                            <p>{{.UIText_UseWizardAlternative}}</p>
                        </div>

                        <div id="basic-settings" class="config-section">
                            <h3 class="section-title">{{.UIText_BasicServerSettings}}</h3>
                            <div class="channel-grid">
                                <div class="form-group">
                                    <label for="ServerName">{{.UIText_ServerName}}:</label>
                                    <input type="text" id="ServerName" name="ServerName" value="{{.ServerName}}">
                                    <div class="input-info">{{.UIText_ServerNameInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="SaveName">{{.UIText_SaveName}}:</label>
                                    <input type="text" id="SaveName" name="SaveName" value="{{.SaveName}}">
                                    <div class="input-info">{{.UIText_SaveNameInfo}}</div>
                                </div>

                                <!--
                                <div class="form-group">
                                    <label for="WorldID">{{.UIText_WorldID}}:</label>
                                    <input type="text" id="WorldID" name="WorldID" value="{{.WorldID}}">
                                    <div class="input-info">{{.UIText_WorldIDInfo}}</div>
                                </div>
                                -->

                                <div class="form-group">
                                    <label for="ServerMaxPlayers">{{.UIText_MaxPlayers}}:</label>
                                    <input type="text" id="ServerMaxPlayers" name="ServerMaxPlayers"
                                        value="{{.ServerMaxPlayers}}" pattern="^\S*$" required>
                                    <div class="input-info">{{.UIText_MaxPlayersInfo}}</div>
                                </div>

                                <div class="form-group password-field">
                                    <label for="ServerPassword">{{.UIText_ServerPassword}}:</label>
                                    <input type="text" id="ServerPassword" name="ServerPassword"
                                        value="{{.ServerPassword}}" pattern="^\S*$">
                                    <div class="input-info">{{.UIText_ServerPasswordInfo}}</div>
                                </div>


                                <div class="form-group">
                                    <label for="ServerAuthSecret">{{.UIText_ServerAuthSecret}}:</label>
                                    <input type="text" id="ServerAuthSecret" name="ServerAuthSecret"
                                        value="{{.ServerAuthSecret}}">
                                    <div class="input-info">{{.UIText_ServerAuthSecretInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="AutoSave">{{.UIText_AutoSave}}:</label>
                                    <select id="AutoSave" name="AutoSave" required>
                                        <option value="true" {{.AutoSaveTrueSelected}}>TRUE</option>
                                        <option value="false" {{.AutoSaveFalseSelected}}>FALSE</option>
                                    </select>
                                    <div class="input-info">{{.UIText_AutoSaveInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="SaveInterval">{{.UIText_SaveInterval}}:</label>
                                    <input type="text" id="SaveInterval" name="SaveInterval" value="{{.SaveInterval}}"
                                        pattern="^\S*$" required>
                                    <div class="input-info">{{.UIText_SaveIntervalInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="AutoPauseServer">{{.UIText_AutoPauseServer}}:</label>
                                    <select id="AutoPauseServer" name="AutoPauseServer" required>
                                        <option value="true" {{.AutoPauseServerTrueSelected}}>TRUE</option>
                                        <option value="false" {{.AutoPauseServerFalseSelected}}>FALSE</option>
                                    </select>
                                    <div class="input-info">{{.UIText_AutoPauseServerInfo}}</div>
                                </div>
                            </div>
                        </div>

                        <div id="network-settings" class="config-section">
                            <h3 class="section-title">{{.UIText_NetworkConfiguration}}</h3>
                            <div class="channel-grid">
                                <div class="form-group">
                                    <label for="GamePort">{{.UIText_GamePort}}:</label>
                                    <input type="text" id="GamePort" name="GamePort" value="{{.GamePort}}"
                                        pattern="^\S*$" required>
                                    <div class="input-info">{{.UIText_GamePortInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="UpdatePort">{{.UIText_UpdatePort}}:</label>
                                    <input type="text" id="UpdatePort" name="UpdatePort" value="{{.UpdatePort}}"
                                        pattern="^\S*$" required>
                                    <div class="input-info">{{.UIText_UpdatePortInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="UPNPEnabled">{{.UIText_UPNPEnabled}}:</label>
                                    <select id="UPNPEnabled" name="UPNPEnabled" required>
                                        <option value="true" {{.UPNPEnabledTrueSelected}}>TRUE</option>
                                        <option value="false" {{.UPNPEnabledFalseSelected}}>FALSE</option>
                                    </select>
                                    <div class="input-info">{{.UIText_UPNPEnabledInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="LocalIpAddress">{{.UIText_LocalIpAddress}}:</label>
                                    <input type="text" id="LocalIpAddress" name="LocalIpAddress"
                                        value="{{.LocalIpAddress}}" pattern="^\S*$" required>
                                    <div class="input-info">{{.UIText_LocalIpAddressInfo}}</div>
                                </div>

                                <!--
                                <div class="form-group">
                                    <label for="StartLocalHost">{{.UIText_StartLocalHost}}:</label>
                                    <select id="StartLocalHost" name="StartLocalHost" required>
                                        <option value="true" {{.StartLocalHostTrueSelected}}>TRUE</option>
                                        <option value="false" {{.StartLocalHostFalseSelected}}>FALSE</option>
                                    </select>
                                    <div class="input-info">{{.UIText_StartLocalHostInfo}}</div>
                                </div>
                                -->

                                <div class="form-group">
                                    <label for="ServerVisible">{{.UIText_ServerVisible}}:</label>
                                    <select id="ServerVisible" name="ServerVisible" required>
                                        <option value="true" {{.ServerVisibleTrueSelected}}>TRUE</option>
                                        <option value="false" {{.ServerVisibleFalseSelected}}>FALSE</option>
                                    </select>
                                    <div class="input-info">{{.UIText_ServerVisibleInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="UseSteamP2P">{{.UIText_UseSteamP2P}}:</label>
                                    <select id="UseSteamP2P" name="UseSteamP2P" required>
                                        <option value="true" {{.UseSteamP2PTrueSelected}}>TRUE</option>
                                        <option value="false" {{.UseSteamP2PFalseSelected}}>FALSE</option>
                                    </select>
                                    <div class="input-info">{{.UIText_UseSteamP2PInfo}}</div>
                                </div>
                            </div>
                        </div>

                        <div id="advanced-settings" class="config-section">
                            <h3 class="section-title">{{.UIText_AdvancedConfiguration}}</h3>
                            <div class="channel-grid">

                                <div class="form-group">
                                    <label for="AutoRestartServerTimer">{{.UIText_AutoRestartServerTimer}}:</label>
                                    <input type="text" id="AutoRestartServerTimer" name="AutoRestartServerTimer"
                                        value="{{.AutoRestartServerTimer}}">
                                    <div class="input-info">{{.UIText_AutoRestartServerTimerInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="AutoStartServerOnStartup">{{.UIText_AutoStartServerOnStartup}}:</label>
                                    <select id="AutoStartServerOnStartup" name="AutoStartServerOnStartup" required>
                                        <option value="true" {{.AutoStartServerOnStartupTrueSelected}}>TRUE</option>
                                        <option value="false" {{.AutoStartServerOnStartupFalseSelected}}>FALSE</option>
                                    </select>
                                    <div class="input-info">{{.UIText_AutoStartServerOnStartupInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label
                                        for="AllowAutoGameServerUpdates">{{.UIText_AllowAutoGameServerUpdates}}:</label>
                                    <select id="AllowAutoGameServerUpdates" name="AllowAutoGameServerUpdates" required>
                                        <option value="true" {{.AllowAutoGameServerUpdatesTrueSelected}}>TRUE</option>
                                        <option value="false" {{.AllowAutoGameServerUpdatesFalseSelected}}>FALSE
                                        </option>
                                    </select>
                                    <div class="input-info">{{.UIText_AllowAutoGameServerUpdatesInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="CreateSSUILogFile">{{.UIText_CreateSSUILogFile}}:</label>
                                    <select id="CreateSSUILogFile" name="CreateSSUILogFile" required>
                                        <option value="true" {{.CreateSSUILogFileTrueSelected}}>TRUE</option>
                                        <option value="false" {{.CreateSSUILogFileFalseSelected}}>FALSE</option>
                                    </select>
                                    <div class="input-info">{{.UIText_CreateSSUILogFileInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="CreateGameServerLogFile">{{.UIText_CreateGameServerLogFile}}:</label>
                                    <select id="CreateGameServerLogFile" name="CreateGameServerLogFile" required>
                                        <option value="true" {{.CreateGameServerLogFileTrueSelected}}>TRUE</option>
                                        <option value="false" {{.CreateGameServerLogFileFalseSelected}}>FALSE</option>
                                    </select>
                                    <div class="input-info">{{.UIText_CreateGameServerLogFileInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="gameBranch">{{.UIText_GameBranch}}</label>
                                    <input type="text" id="gameBranch" name="gameBranch" value="{{.GameBranch}}">
                                    <div class="input-info">{{.UIText_GameBranchInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="ExePath">{{.UIText_ServerExePath}}:</label>
                                    <input type="text" id="ExePath" name="ExePath" value="{{.ExePath}}" readonly>
                                    <div class="input-info">{{.UIText_ServerExePathInfo}}</div>
                                    <div class="input-info">{{.UIText_ServerExePathInfo2}}</div>
                                </div>

                                <div class="form-group password-field">
                                    <label for="AdminPassword">{{.UIText_AdminPassword}}:</label>
                                    <input type="text" id="AdminPassword" name="AdminPassword"
                                        value="{{.AdminPassword}}" pattern="^\S*$">
                                    <div class="input-info">{{.UIText_AdminPasswordInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="AdditionalParams">{{.UIText_AdditionalParams}}:</label>
                                    <input type="text" id="AdditionalParams" name="AdditionalParams"
                                        value="{{.AdditionalParams}}">
                                    <div class="input-info">{{.UIText_AdditionalParamsInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="ShowExpertSettings">Show Expert Settings:</label>
                                    <select id="ShowExpertSettings" name="ShowExpertSettings" required>
                                        <option value="true" {{.ShowExpertSettingsTrueSelected}}>TRUE</option>
                                        <option value="false" {{.ShowExpertSettingsFalseSelected}}>FALSE</option>
                                    </select>
                                    <div class="input-info">Show the Expert Settings to access special configuration options.</div>
                                </div>
                            </div>

                            {{if eq .ShowExpertSettingsTrueSelected "selected"}}
                            <h3 class="section-title">Expert Settings below - only change if you know what you are doing</h3>
                                <div class="channel-grid">
                            
                                    <div class="form-group">
                                        <label for="Debug">Debug Mode:</label>
                                        <select id="Debug" name="Debug" required>
                                            <option value="true" {{.DebugTrueSelected}}>TRUE</option>
                                            <option value="false" {{.DebugFalseSelected}}>FALSE</option>
                                        </select>
                                        <div class="input-info">Enable debug mode for verbose logging (also enables pprof server)</div>
                                    </div>

                                    <div class="form-group">
                                        <label for="LogLevel">Log Level:</label>
                                        <input type="number" id="LogLevel" name="LogLevel" value="{{.LogLevel}}" min="10" max="40" step="10">
                                        <div class="input-info">Log level: 10=Debug, 20=Info (default), 30=Warn, 40=Error</div>
                                    </div>

                                    <div class="form-group">
                                        <label for="LogClutterToConsole">Log Clutter to Console:</label>
                                        <select id="LogClutterToConsole" name="LogClutterToConsole" required>
                                            <option value="true" {{.LogClutterToConsoleTrueSelected}}>TRUE</option>
                                            <option value="false" {{.LogClutterToConsoleFalseSelected}}>FALSE</option>
                                        </select>
                                        <div class="input-info">Show verbose mono/unity logs from game server in console</div>
                                    </div>

                                    <div class="form-group">
                                        <label for="SSUIWebPort">SSUI Web Port:</label>
                                        <input type="text" id="SSUIWebPort" name="SSUIWebPort" value="{{.SSUIWebPort}}">
                                        <div class="input-info">Port for the SSUI web interface (default: 8443). Requires restart.</div>
                                    </div>

                                    <div class="form-group">
                                        <label for="IsConsoleEnabled">SSUI CLI Console:</label>
                                        <select id="IsConsoleEnabled" name="IsConsoleEnabled" required>
                                            <option value="true" {{.IsConsoleEnabledTrueSelected}}>TRUE</option>
                                            <option value="false" {{.IsConsoleEnabledFalseSelected}}>FALSE</option>
                                        </select>
                                        <div class="input-info">Enable the SSUICLI interactive console</div>
                                    </div>

                                    <div class="form-group">
                                        <label for="IsSSCMEnabled">SSCM Integration:</label>
                                        <select id="IsSSCMEnabled" name="IsSSCMEnabled" required>
                                            <option value="true" {{.IsSSCMEnabledTrueSelected}}>TRUE</option>
                                            <option value="false" {{.IsSSCMEnabledFalseSelected}}>FALSE</option>
                                        </select>
                                        <div class="input-info">Enable Stationeers Server Command Manager integration (Linux)</div>
                                    </div>

                                    <div class="form-group">
                                        <label for="AdvertiserOverride">Advertiser Override IP:</label>
                                        <input type="text" id="AdvertiserOverride" name="AdvertiserOverride" value="{{.AdvertiserOverride}}">
                                        <div class="input-info">Override the IP address advertised to Steam. Leave empty for auto-detection.</div>
                                    </div>

                                    <div class="form-group">
                                        <label for="IsUpdateEnabled">SSUI Updates:</label>
                                        <select id="IsUpdateEnabled" name="IsUpdateEnabled" required>
                                            <option value="true" {{.IsUpdateEnabledTrueSelected}}>TRUE</option>
                                            <option value="false" {{.IsUpdateEnabledFalseSelected}}>FALSE</option>
                                        </select>
                                        <div class="input-info">Enable automatic SSUI update checks</div>
                                    </div>

                                    <div class="form-group">
                                        <label for="AllowPrereleaseUpdates">Allow Prerelease Updates:</label>
                                        <select id="AllowPrereleaseUpdates" name="AllowPrereleaseUpdates" required>
                                            <option value="true" {{.AllowPrereleaseUpdatesTrueSelected}}>TRUE</option>
                                            <option value="false" {{.AllowPrereleaseUpdatesFalseSelected}}>FALSE</option>
                                        </select>
                                        <div class="input-info">Include beta/prerelease versions in update checks</div>
                                    </div>

                                    <div class="form-group">
                                        <label for="AllowMajorUpdates">Allow Major Updates:</label>
                                        <select id="AllowMajorUpdates" name="AllowMajorUpdates" required>
                                            <option value="true" {{.AllowMajorUpdatesTrueSelected}}>TRUE</option>
                                            <option value="false" {{.AllowMajorUpdatesFalseSelected}}>FALSE</option>
                                        </select>
                                        <div class="input-info">Allow automatic major version upgrades (may have breaking changes)</div>
                                    </div>

                                    <div class="form-group">
                                        <label for="IsStationeersLaunchPadAutoUpdatesEnabled">SLP Auto Updates:</label>
                                        <select id="IsStationeersLaunchPadAutoUpdatesEnabled" name="IsStationeersLaunchPadAutoUpdatesEnabled" required>
                                            <option value="true" {{.IsStationeersLaunchPadAutoUpdatesEnabledTrueSelected}}>TRUE</option>
                                            <option value="false" {{.IsStationeersLaunchPadAutoUpdatesEnabledFalseSelected}}>FALSE</option>
                                        </select>
                                        <div class="input-info">Automatically update StationeersLaunchPad</div>
                                    </div>

                                    <div class="form-group">
                                        <label for="authEnabled">Web Auth Enabled:</label>
                                        <select id="authEnabled" name="authEnabled" required>
                                            <option value="true" {{.AuthEnabledTrueSelected}}>TRUE</option>
                                            <option value="false" {{.AuthEnabledFalseSelected}}>FALSE</option>
                                        </select>
                                        <div class="input-info">Enable authentication for the web interface</div>
                                    </div>

                                    <div class="form-group">
                                        <label for="AuthTokenLifetime">Auth Token Lifetime:</label>
                                        <input type="number" id="AuthTokenLifetime" name="AuthTokenLifetime" value="{{.AuthTokenLifetime}}" min="1">
                                        <div class="input-info">JWT token lifetime in minutes (default: 1440 = 24 hours)</div>
                                    </div>
                                </div>
                            {{end}}
                        </div>

                        <div id="terrain-settings" class="config-section">
                            <h3 class="section-title">{{.UIText_TerrainSettingsHeader}}</h3>
                            <div class="beta-warning">{{.UIText_TerrainWarning}}</div>
                            <br>
                            <div class="channel-grid">

                                <div class="form-group">
                                    <label for="WorldID">{{.UIText_WorldID}}:</label>
                                    <input type="text" id="WorldID" name="WorldID" value="{{.WorldID}}">
                                    <div class="input-info">{{.UIText_WorldIDInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="Difficulty">{{.UIText_Difficulty}}:</label>
                                    <input type="text" id="Difficulty" name="Difficulty" value="{{.Difficulty}}"
                                        pattern="^\S*$" required>
                                    <div class="input-info">‚úÖ{{.UIText_DifficultyInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="StartCondition">{{.UIText_StartCondition}}:</label>
                                    <input type="text" id="StartCondition" name="StartCondition"
                                        value="{{.StartCondition}}" pattern="^\S*$" required>
                                    <div class="input-info">‚úÖ{{.UIText_StartConditionInfo}}</div>
                                </div>

                                <div class="form-group">
                                    <label for="StartLocation">{{.UIText_StartLocation}}:</label>
                                    <input type="text" id="StartLocation" name="StartLocation"
                                        value="{{.StartLocation}}" pattern="^\S*$" required>
                                    <div class="input-info">‚úÖ{{.UIText_StartLocationInfo}}</div>
                                </div>
                            </div>
                            <div class="fill-hint-wraper" id="fill-hint-wraper"
                                style="display: none; justify-content: center;">
                                <div class="fill-hint" id="fill-hint">{{.UIText_TerrainSettingsFillHint}}</div>
                            </div>
                        </div>


                        <div class="form-actions">
                            <button type="button" class="back-button" onclick="window.location.href = '/'"></button>
                            <button type="button" class="save-button"
                                onclick="document.getElementById('server-config-form').submit()"></button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div id="discord-config-tab" class="tab-content">
            <form id="discord-config-form" action="/saveconfigasjson" method="post">
                <div class="integration-status">
                    <label for="isDiscordEnabled" class="highlight-label">{{.UIText_DiscordIntegration}}:</label>
                    <select id="isDiscordEnabled" name="isDiscordEnabled">
                        <option value="true" {{.IsDiscordEnabledTrueSelected}}>ENABLED</option>
                        <option value="false" {{.IsDiscordEnabledFalseSelected}}>DISABLED</option>
                    </select>
                    <div class="feature-badge">RECOMMENDED</div>
                </div>
                </br>
                <div class="discord-container">
                    <div class="form-group">
                        <label for="discordToken">{{.UIText_DiscordBotToken}}:</label>
                        <input type="password" id="discordToken" name="discordToken" value="{{.DiscordToken}}">
                        <div class="input-info">{{.UIText_DiscordBotTokenInfo}}</div>
                    </div>

                    <h2>{{.UIText_ChannelConfiguration}}</h2>
                    <div class="channel-grid">
                        <div class="form-group">
                            <label for="controlChannelID">{{.UIText_AdminCommandChannel}}:</label>
                            <input type="text" id="controlChannelID" name="controlChannelID"
                                value="{{.ControlChannelID}}">
                            <div class="input-info">{{.UIText_AdminCommandChannelInfo}}</div>
                        </div>

                        <div class="form-group">
                            <label for="controlPanelChannelID">{{.UIText_ControlPanelChannel}}:</label>
                            <input type="text" id="controlPanelChannelID" name="controlPanelChannelID"
                                value="{{.ControlPanelChannelID}}">
                            <div class="input-info">{{.UIText_ControlPanelChannelInfo}}</div>
                        </div>

                        <div class="form-group">
                            <label for="serverInfoPanelChannelID">{{.UIText_ServerInfoPanelChannel}}:</label>
                            <input type="text" id="serverInfoPanelChannelID" name="serverInfoPanelChannelID"
                                value="{{.ServerInfoPanelChannelID}}">
                            <div class="input-info">{{.UIText_ServerInfoPanelChannelInfo}}</div>
                        </div>

                        <div class="form-group">
                            <label for="rotateServerPassword">{{.UIText_RotateServerPassword}}:</label>
                            <select id="rotateServerPassword" name="rotateServerPassword">
                                <option value="true" {{.RotateServerPasswordTrueSelected}}>ENABLED</option>
                                <option value="false" {{.RotateServerPasswordFalseSelected}}>DISABLED</option>
                            </select>
                            <div class="input-info">{{.UIText_RotateServerPasswordInfo}}</div>
                        </div>

                        <div class="form-group">
                            <label for="statusChannelID">{{.UIText_StatusChannel}}:</label>
                            <input type="text" id="statusChannelID" name="statusChannelID" value="{{.StatusChannelID}}">
                            <div class="input-info">{{.UIText_StatusChannelInfo}}</div>
                        </div>

                        <div class="form-group">
                            <label for="connectionListChannelID">{{.UIText_ConnectionListChannel}}:</label>
                            <input type="text" id="connectionListChannelID" name="connectionListChannelID"
                                value="{{.ConnectionListChannelID}}">
                            <div class="input-info">{{.UIText_ConnectionListChannelInfo}}</div>
                        </div>

                        <div class="form-group">
                            <label for="logChannelID">{{.UIText_LogChannel}}:</label>
                            <input type="text" id="logChannelID" name="logChannelID" value="{{.LogChannelID}}">
                            <div class="input-info">{{.UIText_LogChannelInfo}}</div>
                        </div>

                        <div class="form-group">
                            <label for="saveChannelID">{{.UIText_SaveInfoChannel}}:</label>
                            <input type="text" id="saveChannelID" name="saveChannelID" value="{{.SaveChannelID}}">
                            <div class="input-info">{{.UIText_SaveInfoChannelInfo}}</div>
                        </div>

                        <div class="form-group">
                            <label for="errorChannelID">{{.UIText_ErrorChannel}}:</label>
                            <input type="text" id="errorChannelID" name="errorChannelID" value="{{.ErrorChannelID}}">
                            <div class="input-info">{{.UIText_ErrorChannelInfo}}</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="blackListFilePath">{{.UIText_BannedPlayersListPath}}:</label>
                        <input type="text" id="blackListFilePath" name="blackListFilePath"
                            value="{{.BlackListFilePath}}">
                        <div class="input-info">{{.UIText_BannedPlayersListPathInfo}}</div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="back-button" onclick="window.location.href = '/'"></button>
                        <button type="button" class="save-button"
                            onclick="document.getElementById('discord-config-form').submit()"></button>
                    </div>
                </div>
            </form>
            <div class="info-panel">
                <h3>{{.UIText_DiscordIntegrationBenefits}}</h3>
                <ul class="feature-list">
                    <li>{{.UIText_DiscordBenefit1}}</li>
                    <li>{{.UIText_DiscordBenefit2}}</li>
                    <li>{{.UIText_DiscordBenefit3}}</li>
                    <li>{{.UIText_DiscordBenefit4}}</li>
                    <li>{{.UIText_DiscordBenefit5}}</li>
                </ul>
                <p>{{.UIText_DiscordSetupInstructions}} <a
                        href="https://github.com/jacksonthemaster/StationeersServerUI" target="_blank">GitHub
                        repository</a></p>
            </div>
        </div>

        <div id="slp-config-tab" class="tab-content">
            <!-- Beta Disclaimer -->
            <div id="slp-disclaimer" class="slp-disclaimer">
                <div class="slp-disclaimer-content">
                    <span class="slp-disclaimer-icon">‚ö†Ô∏è</span>
                    <h2>Beta Feature</h2>
                    <p>The SLP (Stationeers LaunchPad) Integration is currently in <strong>Beta</strong> and is subject to change.</p>
                    <p>Handle with care and report any issues you encounter.</p>
                    <button class="slp-button slp-button-large" onclick="acknowledgeSLPDisclaimer()">I Understand, Continue</button>
                </div>
            </div>

            <!-- Actual SLP Content (hidden by default) -->
            <div id="slp-content" class="slp-content-hidden">
            {{if eq .IsStationeersLaunchPadEnabled "false"}}
            <div class="slp-section slp-install-section">
                <div class="slp-install-header">
                    <span class="slp-install-icon">üöÄ</span>
                    <h3>{{.UIText_SLP_Title}}</h3>
                </div>
                <p>{{.UIText_SLP_Description}}</p>
                <p style="color: #00ff96; margin-top: 15px; font-weight: bold;">{{.UIText_SLP_ReadyToInstall}}</p>
                <button id="installSLPBtn" class="slp-button slp-button-large" onclick="installSLP()">‚¨áÔ∏è {{.UIText_SLP_InstallButton}}</button>
            </div>

            <div class="slp-section">
                <h3>{{.UIText_SLP_UploadModPackage}}</h3>
                <div id="modPackageUploadZone" class="upload-zone-disabled">
                    <span class="upload-icon">üîí</span>
                    <div class="upload-text">{{.UIText_SLP_InstallFirst}}</div>
                    <div class="upload-subtext">{{.UIText_SLP_InstallFirstSubtext}}</div>
                </div>
            </div>
            {{end}}

            {{if eq .IsStationeersLaunchPadEnabled "true"}}
            <div class="slp-section">
                <h3>{{.UIText_SLP_UploadModPackage}}</h3>
                <p>{{.UIText_SLP_UploadDescription}}</p>
                <p>{{.UIText_SLP_UploadDescriptionLink}} <a href="https://github.com/SteamServerUI/StationeersServerUI/wiki/Modding-with-StationeersLaunchPad#generate-a-mod-package" target="_blank">wiki</a>.</p>
                
                <div id="modPackageUploadZone">
                    <span class="upload-icon">üì¶</span>
                    <div class="upload-text">{{.UIText_SLP_DragDropHere}}</div>
                    <div class="upload-subtext">{{.UIText_SLP_OrClickToSelect}}</div>
                </div>
                <div id="modPackageUploadProgress"></div>
                <input type="file" id="modPackageUpload" accept=".zip" onchange="handleModPackageSelection(this.files)">
                <button id="uploadModPackageBtn" class="slp-button" onclick="uploadModPackage()" disabled>‚¨ÜÔ∏è {{.UIText_SLP_UploadButton}}</button>
            </div>

            <div class="slp-section slp-manage-section">
                <h3>{{.UIText_SLP_ManageInstallation}}</h3>
                <div class="manage-buttons">
                    <div class="manage-left">
                        <p style="color: #ffaaaa;">‚ö†Ô∏è {{.UIText_SLP_UninstallWarning}}</p>
                        <button id="uninstallSLPBtn" class="slp-button slp-button-small danger" onclick="uninstallSLP()">üóëÔ∏è {{.UIText_SLP_UninstallButton}}</button>
                    </div>
                    <div class="manage-right">
                        <p>{{.UIText_SLP_UpdateWorkshopModsDesc}}</p>
                        <button id="updateWorkshopModsBtn" class="slp-button" onclick="updateWorkshopMods()">üîÑ {{.UIText_SLP_UpdateButton}}</button>
                    </div>
                </div>
            </div>

            <div class="slp-section">
                <h3>{{.UIText_SLP_InstalledMods}}</h3>
                <div id="mods-list-container">
                    <div class="loader" id="mods-loader"></div>
                    <div id="mods-list" class="mods-list"></div>
                </div>
            </div>
            {{end}}
            </div><!-- End slp-content -->
        </div>

        <div id="detectionmanager-config-tab" class="tab-content">
                <p>Custom detections allow you to create custom patterns for event detection. These patterns can be used to
                    detect specific events in the server log and send alerts to the "Status" channel in Discord and will be shown in the Events tab on the main dashboard.</p>
                <p>To create a custom detection, you can either define a regex pattern or
                    alternatively a simple string match ("keyword") and a message that will be broadcasted to Discord and the Events log</p>

            <div id="detection-list-container">
                <div class="loader" id="list-loader"></div>
                <div id="detection-list" class="detection-list">
                    <div class="detection-list-header">
                        <div>Type</div>
                        <div>Pattern</div>
                        <div>Message</div>
                        <div>Actions</div>
                    </div>
                    <div id="detection-items">
                        <div class="empty-list">No custom detections found. Add one to get started.</div>
                    </div>
                </div>
            </div>

            <div id="add-detection-container">
                <form id="detection-form">
                    <div class="grid-container">
                        <div class="switch-container">
                            <span class="switch-label">Change Detection Mode</span>
                            <label class="switch">
                                <input type="checkbox" id="detection-type-toggle">
                                <span class="slider"></span>
                            </label>
                            <span id="detection-type-label" style="margin-left: 10px;">Keyword</span>
                        </div>

                        <div class="form-group">
                            <label for="pattern">Pattern:</label>
                            <input type="text" id="pattern" name="pattern" required>
                            <div class="input-info" id="pattern-info">Text to match exactly (case-sensitive)</div>
                        </div>

                        <div class="form-group">
                            <label for="message">Message:</label>
                            <textarea id="message" name="message" rows="3" required></textarea>
                            <div class="input-info" id="message-info">Message to display when pattern is detected</div>
                        </div>

                        <input type="hidden" id="type" name="type" value="keyword">
                        <input type="hidden" id="eventType" name="eventType" value="CUSTOM_DETECTION">
                        <div class="form-actions">
                            <button type="button" class="save-button add-button"></button>
                        </div>
                    </div>
                </form>
            </div>

            <div id="detection-help-container">
                <div class="info-panel">
                    <h3>Creating Effective Detections</h3>
                    <div class="usage-examples">
                        <div class="example">
                            <h4>Keyword Detection:</h4>
                            </p> For example, to detect the "Unsupported shader" message that unity logs when a shader
                            is not supported, you would use the following pattern:</p>
                            <code>Pattern: "Unsupported shader"</code>
                            <code>Message: "Unity detected an unsupported shader. This may cause unexpected behavior."</code>
                        </div>
                        <div class="example">
                            <h4>Regex Detection:</h4>
                            </p> For example, to detect (fictional) the "Player (.+) has reached level (\d+)" message
                            that is logged when a player reaches a certain level in an elevator, you would use the
                            following pattern:</p>
                            <code>Pattern: "Player (.+) has reached level (\d+)"</code>
                            <code>Message: "Player {1} has reached level {2}"</code>
                            </p> The AI of your choise will be more than happy to help you create effective detections.
                            You can also use the <a href="https://regex101.com/" target="_blank">Regex101</a> tool to
                            test your patterns.</p>
                        </div>
                    </div>
                    <p>For more information, visit the <a
                            href="https://github.com/jacksonthemaster/StationeersServerUI/wiki/Custom-Detection-Patterns"
                            target="_blank">GitHub Wiki</a></p>
                </div>
            </div>

            <div class="notification" id="notification"></div>
        </div>

    </main>
    <footer>
        <div class="copyright">Copyright &copy; 2026 <a href="https://github.com/jacksonthemaster">JacksonTheMaster.</a>
            {{.UIText_CopyrightConfig1}} <a
                href="https://github.com/jacksonthemaster/StationeersServerUI/blob/main/LICENSE">{{.UIText_CopyrightConfig2}}</a>.
        </div>
    </footer>

    <script>
        function showConfigTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });

            document.querySelectorAll('.sliding-tab-button').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show the selected content
            const content = document.getElementById(tabId);
            if (content) {
                content.classList.add('active');
            }

            const button = document.querySelector(`.sliding-tab-button[data-tab="${tabId}"]`);
            if (button) {
                button.classList.add('active');
            }
        }

        document.getElementById('isDiscordEnabled').addEventListener('change', function () {
            if (this.value === 'false') {
                alert('You are missing out on nice features! Please consider using the Discord Integration. Info can be found on the GitHub page.');

                // Toggle visual indication
                document.querySelector('.discord-container').classList.add('disabled');
            } else {
                document.querySelector('.discord-container').classList.remove('disabled');
            }
        });

        // Set initial state
        if (document.getElementById('isDiscordEnabled').value === 'false') {
            document.querySelector('.discord-container').classList.add('disabled');
        }

        // Section navigation
        document.querySelectorAll('.section-nav-button').forEach(button => {
            button.addEventListener('click', function () {
                // Hide all sections
                document.querySelectorAll('.config-section').forEach(section => {
                    section.classList.remove('active');
                });

                // Hide the prompt message when a section is selected
                document.getElementById('select-prompt').style.display = 'none';

                // Remove active class from all buttons
                document.querySelectorAll('.section-nav-button').forEach(btn => {
                    btn.classList.remove('active');
                });

                // Show the selected section
                const sectionId = this.getAttribute('data-section');
                document.getElementById(sectionId).classList.add('active');

                // Add active class to the clicked button
                this.classList.add('active');
            });
        });
        document.querySelectorAll('.sliding-tab-button[data-tab]').forEach(button => {
            button.addEventListener('click', () => {
                const tabId = button.getAttribute('data-tab');
                showConfigTab(tabId);
            });
        });
    </script>
    <script src="/static/js/main.js"></script>
    <script src="/static/js/world-gen-config.js"></script>
    <script src="/static/js/detectionmanager.js"></script>
    <script src="/static/js/xmas.js"></script>
    <script src="/static/js/popup.js"></script>
    <script src="/static/js/slp.js"></script>
</body>

</html>